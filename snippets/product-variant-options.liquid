{%- liquid
  assign product_form_id = 'product-form-' | append: section.id
-%}

{%- if option.name == 'Color' or option.name == 'Colour' -%}
  <div class="variant-thumbnails" role="radiogroup" aria-label="Variant {{ option.name }}">
    {%- for value in option.values -%}
      {%- assign variant = product.variants | where: option.name, value | first -%}
      {%- if variant.featured_image -%}
        {%- capture input_id -%}{{ section.id }}-{{ option.position }}-{{ forloop.index0 }}{%- endcapture -%}
        <label
          for="{{ input_id }}"
          class="variant-thumb-label"
          style="display: inline-block; width: 70px; height: 70px; position: relative; margin: 4px; cursor: pointer; border: 2px solid transparent; border-radius: 6px; overflow: hidden;"
        >
          <input
            type="radio"
            id="{{ input_id }}"
            name="options[{{ option.name }}]"
            value="{{ value | escape }}"
            form="{{ product_form_id }}"
            class="variant-thumb-input visually-hidden"
            {% if value == option.selected_value %}checked{% endif %}
            data-product-url="{{ variant.url }}"
          >
          <img
            src="{{ variant.featured_image | image_url: width: 150 }}"
            alt="{{ value }}"
            loading="lazy"
            width="70"
            height="70"
            style="width: 100%; height: 100%; object-fit: cover;"
          >
        </label>
      {%- endif -%}
    {%- endfor -%}
  </div>

  <style>
    .variant-thumb-input:checked + img {
      outline: 2px solid #000;
      outline-offset: -2px;
    }

    .visually-hidden {
      position: absolute !important;
      height: 1px;
      width: 1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
    }
  </style>
{%- else -%}
  {%- for value in option.values -%}
    <input
      type="radio"
      id="{{ option.name | append: forloop.index0 }}"
      name="options[{{ option.name }}]"
      value="{{ value | escape }}"
      form="{{ product_form_id }}"
      {% if value == option.selected_value %}checked{% endif %}
    >
    <label for="{{ option.name | append: forloop.index0 }}">{{ value }}</label>
  {%- endfor -%}
{%- endif -%}
